"use strict";(self["webpackChunkvote"]=self["webpackChunkvote"]||[]).push([[661],{6432:(t,e,a)=>{a.r(e),a.d(e,{default:()=>$});var n=a(3396),o=a(2268),s=a(4870),c=a(9242);const i=a.p+"img/3.2d9f7166.webp";var r=a(6860),d=a(8702),l=a(972),u=a(7139),m=a(3812),p=a.n(m),k=a(3399),g=a(1004),v=a.n(g),f=a(2483),h=a(7038);const w=t=>((0,n.dD)("data-v-0dd1461a"),t=t(),(0,n.Cn)(),t),y=w((()=>(0,n._)("img",{class:"welcome_background",id:"welcomeImgOnloaded",src:i,alt:""},null,-1))),W={class:"welcome_body"},I={class:"body"},_={class:"titles"},S={style:{color:"#f3b77e"}},P={class:"di"},b={style:{"font-size":"50px","font-weight":"bold",margin:"0px 10px"}},C=["src"],q={key:1,id:"welcomePK"},D={class:"username"},O={class:"encourage"},x={key:0},j=w((()=>(0,n._)("img",{class:"hint",src:r,style:{width:"40px",height:"40px"},alt:""},null,-1))),A={class:"sustain_person"},E=["src"],V={__name:"WelcomeVue",props:{data:Object},emits:["returnPage","returnPage1"],setup(t,{emit:e}){const a=t,i=(0,f.yj)(),r=(0,u.oR)(),m=(0,s.qj)({data:[]}),g=t=>t<60?`${t}分钟`:60<=t&&t<=1440?`${parseInt(t/60)}小时${t%60}分钟`:t%1440<60?t%1440+"分钟":`${parseInt(t%1440/60)}小时${t%1440%60}分钟`,w=async t=>{if(r.commit("getPropHeight",!0),r.state.isEndActive)r.commit("chengePublicData","活动已结束无法点赞");else if(a.data.pk)if(t.stopPropagation(),r.state.allPropStatus.welcomeStateStatus=!1,r.state.settings[67].value)r.state.allPropStatus.isVerificationCode=!0,r.commit("changAthleteData",a.data);else{let t=await(0,h.r)(),e=await L(),n=await Q(e);const o=new(v())(navigator.userAgent);fetch(`${d.M5}/support/`,{method:"post",body:JSON.stringify({data:{open_id:`${i.query.openid}`,vote_target_id:a.data.pk,vote_id:i.query.vote_id,phone_model:o.mobile(),system:o.os(),network:(0,k.f)(),key:n,city:t.name}})}).then((t=>t.json())).then((t=>{if(200===t.code){a.data.count+=1,m.data.map((t=>{t.pk===a.data.pk&&(t.count=a.data.count)})),m.data.sort(((t,e)=>e.count-t.count)),m.data.sort(((t,e)=>{if(e.count===t.count)return t.pk-e.pk}));let t=m.data.findIndex((t=>t.pk===a.data.pk));a.data.ranking=t+1,r.commit("changAthleteData",a.data),r.state.settings[26].value&&(r.state.allPropStatus.isOpenQscode=!0),r.state.allPropStatus.successData=!0}else r.commit("chengePublicData",t.msg)}))}else r.commit("chengePublicData","请选择点赞对象")};var V="jsjiami.com.v7";function z(t,e){const a=$();return z=function(e,n){e-=128;let o=a[e];if(void 0===z["qDyyTF"]){var s=function(t){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let a="",n="";for(let o,s,c=0,i=0;s=t["charAt"](i++);~s&&(o=c%4?64*o+s:s,c++%4)?a+=String["fromCharCode"](255&o>>(-2*c&6)):0)s=e["indexOf"](s);for(let o=0,s=a["length"];o<s;o++)n+="%"+("00"+a["charCodeAt"](o)["toString"](16))["slice"](-2);return decodeURIComponent(n)};const e=function(t,e){let a,n,o=[],c=0,i="";for(t=s(t),n=0;n<256;n++)o[n]=n;for(n=0;n<256;n++)c=(c+o[n]+e["charCodeAt"](n%e["length"]))%256,a=o[n],o[n]=o[c],o[c]=a;n=0,c=0;for(let s=0;s<t["length"];s++)n=(n+1)%256,c=(c+o[n])%256,a=o[n],o[n]=o[c],o[c]=a,i+=String["fromCharCode"](t["charCodeAt"](s)^o[(o[n]+o[c])%256]);return i};z["euDckE"]=e,t=arguments,z["qDyyTF"]=!0}const c=a[0],i=e+c,r=t[i];return r?o=r:(void 0===z["uejBIR"]&&(z["uejBIR"]=!0),o=z["euDckE"](o,n),t[i]=o),o},z(t,e)}(function(t,e,a,n,o,s,c){t>>=6,s="hs",c="hs",function(e,a,i,r,d){const l=z;r="tfi",s=r+s,d="up",c+=d,s=i(s),c=i(c),i=0;const u=e();while(--n+a)try{r=parseInt(l(143,"1vzc"))/1*(parseInt(l(134,"KL^#"))/2)+parseInt(l(131,"Q5Y0"))/3+-parseInt(l(137,"qmaE"))/4*(-parseInt(l(132,"uS6T"))/5)+parseInt(l(141,"#k1m"))/6*(-parseInt(l(139,"s]FJ"))/7)+-parseInt(l(142,"YpCO"))/8+parseInt(l(129,")qGc"))/9+-parseInt(l(130,"CyAA"))/10*(parseInt(l(144,"siPF"))/11)}catch(m){r=i}finally{if(d=u[s](),t<=n)i?o?r=d:o=d:i=d;else if(i==o["replace"](/[PVKpxDqCgLESybwQ=]/g,"")){if(r===a){u["un"+s](d);break}u[c](d)}}}(a,e,(function(t,e,a,n,o,s,c){return e="split",t=arguments[0],t=t[e](""),a="reverse",t=t[a]("v"),n="join",t[n]("")}))})(12160,139923,$,192),$&&(V=$);const Q=async t=>{const e=z,a={NGZbz:function(t,e){return t+e},nHvzV:e(145,"vHE$")};return p()[e(146,"#k1m")](a["NGZbz"](t,a[e(128,"2xdI")]))};function $(){const t=function(){return[V,"EjDPsbjwEiaCxmQxiK.qcgyKoLmpS.Egvgq7yVCq==","t8oFcmk9WOlcU8kcWQq","a8kSWPtdI8k1e2ayWP3cImkq","WOL7W67cIq","zdpcQJvMrq","W4zLWPD1WP8mW43cIa","W4xcGrmhAh5XlcZdVdyt"].concat(function(){return["xCkCWPrEaW","irvlWRxcVSo7WQn3CCkbW67cSK4","nmkZWQlcVSkRad41sG","rw0UW4xcVq1JbSo1nmobWOG","WQ3cI8odW7egWOXUAa","qw8PW4/dRMLhf8oRkW","W4uoxKtdR1BcVKxcQSoA","fs8sfmkAFaBdISkXWQtcKa"].concat(function(){return["WOlcVGRcIuSMW7vgWQe","zCkEW58QWOBdH8o1a07dO8k6","WPzboCkYvsmyWOJcL8kOWPHO","kSkBibxdI8kVwSkstmoRWPC","W4aietVdPwtcPhW","mMtdUsLpuI/cT8ok","tSkBj8oOcSowWQ4Lpt1AW4m"]}())}())}();return $=function(){return t},$()}V="jsjiami.com.v7";const L=()=>fetch(`${d.M5}/keys/?open_id=${i.query.openid}`).then((t=>t.json())).then((t=>{if(200===t.code)return t.key})),R=(0,s.qj)([]),U=async()=>{if(a.data.pk){let t=await(0,l.f)(`/recentfivevoterecord/?vote_id=${i.query.vote_id}&vote_target_id=${a.data.pk}`);if(!t)return;t.map((t=>{let e=Math.floor(563*Math.random())+1;R.push(`${d.fV}/media/avator/random/${e}.webp`)}))}};U();const K=()=>{r.state.allPropStatus.welcomeStateStatus=!1;let t=document.getElementById("welcomeImgOnloaded");t.removeEventListener("load",M)},B=(0,s.iH)(!1),M=()=>{B.value=!0};(0,n.bv)((()=>{let t=document.getElementById("welcomeImgOnloaded");t.addEventListener("load",M)}));const F=async()=>{let t=await(0,l.f)(`/votetargetrank/?vote_id=${i.query.vote_id}`);t.sort(((t,e)=>e.count-t.count)),t.sort(((t,e)=>{if(e.count===t.count)return t.pk-e.pk})),m.data=[...t]};return F(),(t,e)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:"welcome",onClick:K},[y,(0,n._)("div",W,[(0,n._)("div",I,[(0,n._)("div",_,[(0,n.Uk)(" 您已经 "),(0,n._)("span",S,(0,o.zw)(g(a.data.value)),1),(0,n.Uk)(" 没有来了,上次支持过的选手现在是 ")]),(0,n._)("div",P,[(0,n.Uk)(" 第 "),(0,n._)("span",b,(0,o.zw)(a.data.ranking),1),(0,n.Uk)(" 名 ")]),a.data.img&&"img/1.png"!==a.data.img?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"avaotr",src:(0,s.SU)(d.fV)+"/media/"+a.data.img,alt:""},null,8,C)):((0,n.wg)(),(0,n.iD)("div",q,(0,o.zw)(a.data.key),1)),(0,n._)("div",D,(0,o.zw)(a.data.name),1),(0,n._)("div",{onClick:e[0]||(e[0]=t=>{w(t)}),class:"suddenSupport"}," 马上"+(0,o.zw)((0,s.SU)(r).state.settings[94].value),1),(0,n._)("div",O,[1===a.data.ranking?((0,n.wg)(),(0,n.iD)("span",x,"冠军宝座仍被觊觎,不可松懈,坚持住")):(0,n.kq)("",!0)]),j,(0,n._)("div",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(R,(t=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("img",{src:t,alt:""},null,8,E)])))),256))])])])],512)),[[c.F8,B.value]])}};var z=a(89);const Q=(0,z.Z)(V,[["__scopeId","data-v-0dd1461a"]]),$=Q}}]);